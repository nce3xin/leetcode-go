# 二叉树中的最大路径和

124：[https://leetcode-cn.com/problems/binary-tree-maximum-path-sum/](https://leetcode-cn.com/problems/binary-tree-maximum-path-sum/)

路径 被定义为一条从树中任意节点出发，沿父节点-子节点连接，达到任意节点的序列。同一个节点在一条路径序列中 至多出现一次 。该路径 至少包含一个 节点，且不一定经过根节点。

路径和 是路径中各节点值的总和。

给你一个二叉树的根节点 root ，返回其 最大路径和 。

## 解法

和二叉树的直径很像，也是后序遍历，在后续位置，更新全局res值。

这题目的难点在于理解题意和转化题意。

1. 「可以从任意节点出发, 到达任意节点」 的路径, 一定是先上升（ 0 ～ n 个）节点, 到达顶点, 后下降（ 0 ～ n 个）节点。 我们可以通过枚举顶点的方式来枚举路径。枚举的方式就是后序遍历。

2. 我们枚举顶点时, 可以把路径分拆成3部分： 左侧路径、右侧路径和顶点。题目中说不一定经过根节点，不是说枚举每个节点时都不能经过根节点。遍历每个节点，是必须要经过根节点的。每个节点的子树都判断过一遍。以当前节点为顶点的路径中, 最大和为 两侧路径的最大和 + 节点的值。
   需要注意的是, 两侧路径也可能不选, 此时取 0。

3. 在后序位置更新全局的最大路径和。这个路径和是左+右+root，不是max(左，右)+root。